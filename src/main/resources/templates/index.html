<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:attr="lang=${#locale.language}">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title th:text="${pageTitle} ?: 'Mommyâ€™s ice cream'">Mommyâ€™s ice cream</title>
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link rel="stylesheet" th:href="@{/css/estilos.css}" />
        <style>
            /* Quita la sombra del banner principal sin afectar otros banners */
            .no-overlay::before { content: none !important; }
            /* Quita el background de ese banner */
            .no-bg { background: none !important; }
        </style>

    </head>
    <body>

        <!-- Header / Navbar 
        Muestra la barra superior interactiva para navegar por la pagina -->
        <header>
            <!--Logo + nombre de la pagina, seccion 1-->
            <div class="navbar"> 
                <a class="brand" th:href="@{/}">
                    <img th:src="@{/img/logo.png}" alt="Logo Mommy's ice cream" />
                    <h1>
                        <span th:text="${brandLine1} ?: 'Mommyâ€™s'"></span>
                        <span th:text="${brandLine2} ?: 'Ice Cream'"></span>
                    </h1>
                </a>
         <!--Categorias del menu, seccion 2-->
                <nav class="nav-menu">
                    <a th:href="@{/comprar}"        th:text="#{nav.comprar}">Comprar</a>
                    <a th:href="@{/catalogo}"       th:text="#{nav.catalogo}">CatÃ¡logo</a>
                    <a th:href="@{/sobre-nosotros}" th:text="#{nav.sobreNosotros}">Sobre Nosotros</a>
                    <a th:href="@{/contacto}"       th:text="#{nav.contacto}">ContÃ¡ctenos</a>
                </nav>
        <!--Opciones de lenguaje y carrito de compras, seccion 3-->
                <div class="nav-actions">
                    <form method="get">
                        <select class="lang-select" name="lang" aria-label="Idioma" onchange="this.form.submit()">
                            <option value="es" th:selected="${#locale.language == 'es'}">ES</option>
                            <option value="en" th:selected="${#locale.language == 'en'}">EN</option>
                        </select>
                    </form>
                                        <!-- CARRITO CON MENÃš DROPDOWN -->
                    <div class="carrito-menu-container" style="position:relative;">
                    
                        <img th:src="@{/img/carrito.png}" onclick="toggleCarritoMenu()"
                            style="width:28px;height:28px;object-fit:cover;cursor:pointer;" />
                    
                        <div id="carritoMenu" style="
                                            display:none;
                                            position:absolute;
                                            top:40px;
                                            right:0;
                                            background:white;
                                            border-radius:10px;
                                            box-shadow:0 4px 12px rgba(0,0,0,0.2);
                                            padding:10px;
                                            z-index:999;
                                            min-width:180px;">
                    
                            <a th:href="@{/carrito}"
                                style="display:flex;align-items:center;gap:8px;padding:8px;text-decoration:none;color:var(--texto);font-weight:600;">
                                ðŸ›’ Ver Carrito
                            </a>
                    
                            <a th:href="@{/compras/historial}"
                                style="display:flex;align-items:center;gap:8px;padding:8px;text-decoration:none;color:var(--texto);font-weight:600;">
                                ðŸ“¦ Historial de Compras
                            </a>
                    
                        </div>
                    
                    </div>
                    <a th:href="@{/login}" title="Cuenta" style="text-decoration:none;">
                        <img th:src="@{/img/cuenta.png}" alt="Perfil" style="width:28px;height:28px;object-fit:cover;border-radius:50%;" />
                    </a>
                </div>
            </div>
        </header>
        <!--Banner de helados (Compras) -->
        <section class="hero--banner home-hero no-overlay no-bg">
            <img class="hero-img" th:src="${heroLeft} ?: @{/img/banner.jpg}" alt="Helados artesanales" />
            <div class="cta">
                    <a class="btn pill" th:href="@{/orden/nueva}" th:text="#{cta.hacerPedido}">Order now!</a>
            </div>
        </section>
        <section class="grid3 home-grid">
            <!-- Tarjeta 1: Ver mÃ¡s (CatÃ¡logo) -->
            <div class="tile">
                <img th:src="${tile1} ?: @{/img/heladosTarjeta1.jpg}" alt="CatÃ¡logo de helados" />
                <div class="tile-cta">
                    <a class="btn pill" th:href="@{/catalogo}" th:text="#{cta.verMas}">See more</a>
                </div>
            </div>

            <!-- Tarjeta 2: Pide tu sabor personalizado -->
            <div class="tile">
                <img th:src="${tile2} ?: @{/img/frutas.jpg}" alt="Frutas para paletas personalizadas" />
                <div class="tile-cta">
                    <a class="btn pill" th:href="@{/productos/catalogo} + '#sugerir-nuevo'" th:attr="aria-label=#{cta.saborPersonalizado}" th:text="#{cta.saborPersonalizado}">Request your custom flavor!</a>
                </div>
            </div>

            <!-- Tarjeta 3: Ver reseÃ±as -->
            <div class="tile">
                <img th:src="${tile3} ?: @{/img/resenas.png}" alt="Clientes dejando reseÃ±as" />
                <div class="tile-cta">
                    <a class="btn pill" th:href="@{/resenas}" th:attr="aria-label=#{cta.feedback}" th:text="#{cta.feedback}">See reviews</a>
                </div>
            </div>
        </section>
        <footer>
            <p>&copy; 2025 Mommys Ice Cream</p>
        </footer>

    <script src="/js/lang.js"></script>
    <!-- Script para abrir el menu del carrito como un hamburger menu -->
    <script>
        function toggleCarritoMenu() {
            let menu = document.getElementById("carritoMenu");
            menu.style.display = menu.style.display === "block" ? "none" : "block";
        }

        // Cerrar si se hace clic afuera
        document.addEventListener("click", function(e){
            const menu = document.getElementById("carritoMenu");
            const container = document.querySelector(".carrito-menu-container");
            if (!container.contains(e.target)) {
                menu.style.display = "none";
            }
        });
    </script>
    </body>
</html>
